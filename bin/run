#!/usr/bin/env bash

set -o errexit
set -o errtrace
set -o nounset
set -o pipefail

# Builds and runs kubectl-nearby with the given args (if any)

source "bin/lib/build-utils.sh"

function _go_files() {
  find . -type f -name '*.go' -depth 1 -not -name '*_test.go' \
    | tr '\r\n' ' '
}

go run \
  "$(_ldflags)" \
  $(_go_files) \
  "${@}"
